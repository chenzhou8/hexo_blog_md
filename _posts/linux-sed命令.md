title: Linux-sed命令
date: 2017-06-06 22:06:39
categories: Linux
tags: Linux
description: sed 是一种在线编辑器，它一次处理一行内容。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有 改变，除非你使用重定向存储输出。Sed主要用来自动编辑一个或多个文件；简化对文件的反复操作；编写转换程序等。
---

## 语法

1. 语法如下
```
sed命令行格式为：
         sed [-nefri]  ‘command’  输入文本/文件
常用选项：
        -n: 取消默认的输出,使用安静(silent)模式。在一般 sed 的用法中，所有来自 STDIN的资料一般都会被列出到屏幕上。
            但如果加上 -n 参数后，则只有经过sed 特殊处理的那一行(或者动作)才会被列出来
        -e: 进行多项编辑，即对输入行应用多条sed命令时使用. 直接在指令列模式上进行 sed 的动作编辑
        -f: 指定sed脚本的文件名. 直接将 sed 的动作写在一个档案内， -f filename 则可以执行 filename 内的sed 动作
        -r: sed 的动作支援的是延伸型正则表达式的语法。(预设是基础正则表达式语法)
        -i: 直接修改读取的文件内容，而不是由屏幕输出      

常用命令：
        a: 新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)
        c: 取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行
        d: 删除，因为是删除，所以 d 后面通常不接任何内容
        i: 插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)
        p: 列印，亦即将某个选择的资料印出。通常 p 会与参数 sed -n 一起用
        s: 取代，可以直接进行替换的工作。通常这个 s 的动作可以搭配正则表达式。例如 1,20s/old/new/g 
```

2. 例子
```
1. 定址
定址用于决定对哪些行进行编辑。地址的形式可以是数字、正则表达式、或二者的结合。
如果没有指定地址，sed将处理输入文件的所有行。
地址是一个数字，则表示行号；是“$"符号，则表示最后一行。例如: 
    sed -n '3p' datafile     <==只打印第三行

2. 只显示指定行范围的文件内容，例如:
    sed -n '100,200p' mysql_slow_query.log   <==只显示100-200行的文件内容
```

## 详细教程

[linux-sed常见用法](http://www.cnblogs.com/emanlee/archive/2013/09/07/3307642.html)

## 常用用法

在文件的第一行前面插入一行abc
```
    sed -i '1i\abc' urfile 
```
