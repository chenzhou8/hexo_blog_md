title: leetcode-ugly_number2
date: 2017-06-12 21:37:54
categories: leetcode
tags: leetcode
---

## Description
```
Description:
    Write a program to find the n-th ugly number.

```

## Example
```
Example:
    Ugly numbers are positive numbers whose prime factors only include 2, 3, 5. 
    For example, 1, 2, 3, 4, 5, 6, 8, 9, 10, 12 is the sequence of the first 10 ugly numbers.
    Note that 1 is typically treated as an ugly number, and n does not exceed 1690.

```

<!-- more -->

## Hints
```
Hints:
    Assume you have Uk, the kth ugly number. Then Uk+1 must be Min(L1 * 2, L2 * 3, L3 * 5).
    The key is to realize each number can be and have to be generated by a former number multiplied by 2, 3 or 5
    e.g.
        1 2 3 4 5 6 8 9 10 12 15..
    what is next?
        it must be x * 2 or y * 3 or z * 5, where x, y, z is an existing number.

    How do we determine x, y, z then?
        apparently, you can just traverse the sequence generated by far from 1 ... 15,
        until you find such x, y, z that x * 2, y * 3, z * 5 is just bigger than 15. 
        In this case x=8, y=6, z=4. Then you compare x * 2, y * 3, z * 5 so you know next number will be x * 2 = 8 * 2 = 16.
        k, now you have 1,2,3,4,....,15, 16,

    Then what is next?
        You wanna do the same process again to find the new x, y, z, but you realize, wait, do I have to
        traverse the sequence generated by far again?

    NO! since you know last time, x=8, y=6, z=4 and x=8 was used to generate 16, so this time, 
    you can immediately know the new_x = 9 (the next number after 8 is 9 in the generated sequence), y=6, z=4.
    Then you need to compare new_x * 2, y * 3, z * 5. You know next number is 9 * 2 = 18;

    And you also know, the next x will be 10 since new_x = 9 was used this time.
    But what is next y? apparently, if y=6, 6*3 = 18, which is already generated in this round. So you also need to update next y from 6 to 8.

    Based on the idea above, you can actually generated x,y,z from very beginning, and update x, y, z accordingly. It ends up with a O(n) solution.```

## Solution

```
class Solution(object):
    def nthUglyNumber(self, num):
        """
        :type num: int
        :rtype: int
        """
        if num <= 0 or num > 1690:
            return 
        else:
            ugly_num = [1]
            i2, i3, i5 = 0, 0, 0
            while num > 1:
                t2 ,t3, t5 = 2*ugly_num[i2], 3*ugly_num[i3], 5*ugly_num[i5]
                temp_min = min((t2, t3, t5))
                if temp_min == t2:
                    i2 += 1
                if temp_min == t3:
                    i3 += 1
                if temp_min == t5:
                    i5 += 1
                ugly_num.append(temp_min)
                num -= 1
            return ugly_num[-1]
solution = Solution()
print(solution.nthUglyNumber(300))

```
